{% extends "base_with_header.html" %}
{% load staticfiles %}

{% block pagetitle %}
New Station
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
{% endblock %}

{% block content %}
<div class="container-fluid">
	<form class="form-horizontal" action="{% url 'stations:list' %}" method="post" role="form">
	{% csrf_token %}
	{{ form.non_field_errors }}

	<!-- Name -->
	<div class="{{ form.name.auto_id }}_container form-group">
		{{ form.name.errors }}
		<label class="col-sm-2" for="{{ form.name.auto_id }}">{{ form.name.label }}</label>
		<input class="col-sm-10" id="{{ form.name.auto_id }}" type="text" name="{{ form.name.name }}" maxlength="{{ form.name.field.widget.attrs.maxlength }}" value="{{ form.name.value |default_if_none:"" }}"/>
	</div>

	<!-- Description -->
	<div class="{{ form.description.auto_id }}_container form-group">
		{{ form.description.errors }}
		<label class="col-sm-2" for="{{ form.description.auto_id }}">{{ form.description.label }}</label>
		<textarea class="col-sm-10" id="{{ form.description.auto_id }}" type="text" name="{{ form.description.name }}" rows="{{ form.description.field.widget.attrs.rows }}" cols="{{ form.description.field.widget.attrs.cols }}">{{ form.description.value |default_if_none:"" }}</textarea>
	</div>

	<!-- Addresses -->
	<fieldset id="addresses">
		<legend>Web Addresses</legend>
		{% for a_form in address_formset %}
			<!-- URL -->
			<div class="{{ a_form.url.auto_id }}_container form-group">
				{{ a_form.description.errors }}
				<label class="col-sm-2" for="{{ a_form.url.auto_id }}">{{ a_form.url.label }}</label>
				<input class="col-sm-10" id="{{ a_form.url.auto_id }}" type="text" name="{{ a_form.url.name }}" maxlength="{{ a_form.url.field.widget.attrs.maxlength }}" value="{{ a_form.url.value |default_if_none:"" }}"/>
			</div>
		{% endfor %}
	</fieldset>
	
	<!-- Station Genres -->
	<fieldset id="station-genres">
		<legend>Genres</legend>
		{% for a_form in genre_formset %}
			<!-- URL -->
			<div class="{{ a_form.genre.auto_id }}_container form-group">
				{{ a_form.description.errors }}
				<label class="col-sm-2" for="{{ a_form.genre.auto_id }}">{{ a_form.genre.label }}</label>
				<input class="col-sm-10" id="{{ a_form.genre.auto_id }}" type="text" name="{{ a_form.genre.name }}" maxlength="{{ a_form.genre.field.widget.attrs.maxlength }}" value="{{ a_form.genre.value |default_if_none:"" }}"/>
			</div>
		{% endfor %}
	</fieldset>
	
	<input type="submit" value="Create" />
</form>
{% endblock %}

{% block body_scripts %}
	{{ block.super }}
	<script type='text/javascript'>
		var addressTemplate = '<div class="addresses_set">{{ a_form.url }}</div>';
	</script>
	<script type='text/javascript' src='{% static 'stations/createStationFormsets.js' %}'></script>
{% endblock %}
